EESchema Schematic File Version 4
LIBS:Master_Board-cache
EELAYER 26 0
EELAYER END
$Descr USLetter 11000 8500
encoding utf-8
Sheet 1 9
Title "BMS_MasterBoard-Root"
Date "2017-06-25"
Rev "V2"
Comp "Eclipse Solar Car"
Comment1 "Julien G. Bourassa"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 9000 1300 1300 5200
U 58F25814
F0 "STM32F446" 60
F1 "STM32F446.sch" 60
F2 "PA4" O L 9000 1800 60 
F3 "PA0" O L 9000 1400 60 
F4 "PA1" O L 9000 1500 60 
F5 "VBat" I L 9000 6400 60 
F6 "PC0" O L 9000 6000 60 
F7 "PC1" O L 9000 5900 60 
F8 "PC2" O L 9000 5800 60 
F9 "PC3" I L 9000 5700 60 
F10 "PC4" O L 9000 5600 60 
F11 "PC5" O L 9000 5500 60 
F12 "PB0" I L 9000 4400 60 
F13 "PB1" I L 9000 4300 60 
F14 "PB2" I L 9000 4200 60 
F15 "PB10" I L 9000 3500 60 
F16 "PB12" I L 9000 3400 60 
F17 "PB13" O L 9000 3300 60 
F18 "PB14" O L 9000 3200 60 
F19 "PB15" O L 9000 2400 60 
F20 "PC6" O L 9000 5400 60 
F21 "PC7" O L 9000 5300 60 
F22 "PC8" I L 9000 5200 60 
F23 "PC9" I L 9000 5100 60 
F24 "PA8" I L 9000 2200 60 
F25 "PA11" I L 9000 2500 60 
F26 "PA12" O L 9000 2600 60 
F27 "PA15" I L 9000 5000 60 
F28 "PC10" I L 9000 4900 60 
F29 "PC11" I L 9000 4800 60 
F30 "PC12" I L 9000 4700 60 
F31 "PD2" I L 9000 4600 60 
F32 "PB4" O L 9000 4100 60 
F33 "PB5" I L 9000 4000 60 
F34 "PB6" I L 9000 3900 60 
F35 "PB7" I L 9000 3800 60 
F36 "BOOT0" I L 9000 6300 60 
F37 "PB8" O L 9000 3700 60 
F38 "PB9" O L 9000 3600 60 
F39 "PA5" O L 9000 1900 60 
F40 "PA6" I L 9000 2000 60 
F41 "PA7" O L 9000 2100 60 
F42 "NRST" I L 9000 6100 60 
F43 "USART1_RX" I L 9000 2900 60 
F44 "USART1_TX" O L 9000 3000 60 
$EndSheet
$Sheet
S 9000 700  1250 350 
U 58F590C0
F0 "Power Supply" 60
F1 "Power Supply.sch" 60
$EndSheet
$Sheet
S 6100 1450 1100 300 
U 58F7D3A7
F0 "CAN1" 60
F1 "CAN1.sch" 60
F2 "TXD" I R 7200 1650 60 
F3 "RXD" O R 7200 1550 60 
$EndSheet
Text Label 8700 1400 0    60   ~ 0
PA0
Text Label 8700 1500 0    60   ~ 0
PA1
Text Label 8700 1800 0    60   ~ 0
PA4
Text Label 8700 1900 0    60   ~ 0
PA5
Text Label 8700 2000 0    60   ~ 0
PA6
Text Label 8700 2100 0    60   ~ 0
PA7
Text Label 8700 2200 0    60   ~ 0
PA8
Text Label 8700 2500 0    60   ~ 0
PA11
Text Label 8700 2600 0    60   ~ 0
PA12
Text Label 8700 5000 0    60   ~ 0
PA15
Text Label 8700 2400 0    60   ~ 0
PB15
Text Label 8700 3200 0    60   ~ 0
PB14
Text Label 8700 3300 0    60   ~ 0
PB13
Text Label 8700 3400 0    60   ~ 0
PB12
Text Label 8700 3500 0    60   ~ 0
PB10
Text Label 8700 3600 0    60   ~ 0
PB9
Text Label 8700 3700 0    60   ~ 0
PB8
Text Label 8700 3800 0    60   ~ 0
PB7
Text Label 8700 3900 0    60   ~ 0
PB6
Text Label 8700 4000 0    60   ~ 0
PB5
Text Label 8700 4100 0    60   ~ 0
PB4
Text Label 8700 4200 0    60   ~ 0
PB2
Text Label 8700 4300 0    60   ~ 0
PB1
Text Label 8700 4400 0    60   ~ 0
PB0
Text Label 8700 4700 0    60   ~ 0
PC12
Text Label 8700 4800 0    60   ~ 0
PC11
Text Label 8700 4900 0    60   ~ 0
PC10
Text Label 8700 5100 0    60   ~ 0
PC9
Text Label 8700 5200 0    60   ~ 0
PC8
Text Label 8700 5300 0    60   ~ 0
PC7
Text Label 8700 5400 0    60   ~ 0
PC6
Text Label 8700 5500 0    60   ~ 0
PC5
Text Label 8700 5600 0    60   ~ 0
PC4
Text Label 8700 5700 0    60   ~ 0
PC3
Text Label 8700 5800 0    60   ~ 0
PC2
Text Label 8700 5900 0    60   ~ 0
PC1
Text Label 8700 6000 0    60   ~ 0
PC0
Text Label 8700 4600 0    60   ~ 0
PD2
Text Label 8700 6300 0    60   ~ 0
BOOT0
Text Label 8700 6400 0    60   ~ 0
VBat
Text Label 8700 6100 0    60   ~ 0
NRST
$Sheet
S 6100 2000 1100 300 
U 593E754B
F0 "CAN2" 60
F1 "CAN2.sch" 60
F2 "CAN2_H" B L 6100 2100 60 
F3 "CAN2_L" B L 6100 2200 60 
F4 "TXD" I R 7200 2100 60 
F5 "RXD" O R 7200 2200 60 
$EndSheet
Text Label 5600 2100 0    60   ~ 0
CAN2_H
Text Label 5600 2200 0    60   ~ 0
CAN2_L
$Sheet
S 6100 4500 1700 650 
U 59412458
F0 "ContactorControl" 60
F1 "ContactorControl.sch" 60
F2 "HighSide" I R 7800 4600 60 
F3 "MainP-LowSide" I R 7800 4700 60 
F4 "MainN-LowSide" I R 7800 4800 60 
F5 "MPPT-LowSide" I R 7800 4900 60 
F6 "MainN_EN" O L 6100 4600 60 
F7 "MainP_EN" O L 6100 4750 60 
F8 "MPPT_EN" O L 6100 4900 60 
F9 "12V_Contactor" I L 6100 5050 60 
F10 "Kill_Switch_State" O R 7800 5100 60 
$EndSheet
NoConn ~ 8700 3800
NoConn ~ 8700 3900
NoConn ~ 8700 2200
NoConn ~ 8700 5200
NoConn ~ 8700 5300
NoConn ~ 8700 5700
NoConn ~ 8700 6300
Text Label 8700 2900 2    60   ~ 0
RS232_RX
Text Label 8700 3000 2    60   ~ 0
RS232_TX
$Sheet
S 6100 3450 1300 600 
U 59829650
F0 "Precharge" 60
F1 "Precharge.sch" 60
F2 "PC_MAIN" I R 7400 3850 60 
F3 "PC_MPPT" I R 7400 3650 60 
F4 "12V_Contactor" I L 6100 3750 60 
$EndSheet
NoConn ~ 8700 3600
NoConn ~ 8700 3700
Text Label 7550 1650 2    60   ~ 0
PA12
Text Label 7550 1550 2    60   ~ 0
PA11
Text Label 7550 2200 2    60   ~ 0
PB5
Text Label 7550 2100 2    60   ~ 0
PB13
NoConn ~ 8700 2100
$Sheet
S 6100 5450 550  500 
U 5981A81E
F0 "Fan Control" 60
F1 "Fan Control.sch" 60
F2 "GPO1_EN" I R 6650 5600 60 
F3 "GPO2_EN" I R 6650 5700 60 
F4 "GPO3_EN" I R 6650 5800 60 
$EndSheet
Text Label 5450 4600 0    60   ~ 0
IO2
Text Label 5450 4750 0    60   ~ 0
IO1
Text Label 5450 4900 0    60   ~ 0
IO3
Text Label 7750 3650 2    60   ~ 0
PB2
Text Label 7750 3850 2    60   ~ 0
PB10
Text Label 7550 2700 2    60   ~ 0
PA4
Text Label 7550 2850 2    60   ~ 0
PA5
Text Label 7550 3000 2    60   ~ 0
PA6
NoConn ~ 8700 5600
NoConn ~ 8700 5500
NoConn ~ 8700 4100
$Sheet
S 6100 2550 1100 600 
U 5982995E
F0 "Voltage Sense" 60
F1 "VoltageSense.sch" 60
F2 "VSENSE_BP" O R 7200 2700 60 
F3 "VSENSE_EN" I R 7200 2850 60 
F4 "VSENSE_MPPT" O R 7200 3000 60 
$EndSheet
Text Label 6950 5600 2    60   ~ 0
PC0
Text Label 6950 5700 2    60   ~ 0
PC1
Text Label 6950 5800 2    60   ~ 0
PC2
NoConn ~ 8700 4400
NoConn ~ 8700 4300
Wire Wire Line
	8700 3600 9000 3600
Wire Wire Line
	8700 5300 9000 5300
Wire Wire Line
	8700 5200 9000 5200
Wire Wire Line
	7800 5100 9000 5100
Wire Wire Line
	8700 2100 9000 2100
Wire Wire Line
	8700 2000 9000 2000
Wire Wire Line
	8700 1900 9000 1900
Wire Wire Line
	8700 1800 9000 1800
Wire Wire Line
	6100 4900 5450 4900
Wire Wire Line
	6100 4750 5450 4750
Wire Wire Line
	6100 4600 5450 4600
Wire Wire Line
	8700 2200 9000 2200
Wire Wire Line
	8700 4100 9000 4100
Wire Wire Line
	8700 4000 9000 4000
Wire Wire Line
	8700 3900 9000 3900
Wire Wire Line
	8700 3800 9000 3800
Wire Wire Line
	8700 3700 9000 3700
Wire Wire Line
	6100 2200 5600 2200
Wire Wire Line
	6100 2100 5600 2100
Wire Wire Line
	9000 2400 8700 2400
Wire Wire Line
	9000 3200 8700 3200
Wire Wire Line
	8700 6400 9000 6400
Wire Wire Line
	8700 6300 9000 6300
Wire Wire Line
	8700 6100 9000 6100
Wire Wire Line
	8700 6000 9000 6000
Wire Wire Line
	8700 5900 9000 5900
Wire Wire Line
	8700 5800 9000 5800
Wire Wire Line
	8700 5700 9000 5700
Wire Wire Line
	8700 5400 9000 5400
Wire Wire Line
	8700 4200 9000 4200
Wire Wire Line
	8700 3500 9000 3500
Wire Wire Line
	8700 5000 9000 5000
Wire Wire Line
	9000 2900 8700 2900
Wire Wire Line
	9000 3000 8700 3000
Wire Wire Line
	7200 2100 7550 2100
Wire Wire Line
	8700 3300 9000 3300
Wire Wire Line
	9000 3400 8700 3400
Wire Wire Line
	8700 2500 9000 2500
Wire Wire Line
	8700 2600 9000 2600
Wire Wire Line
	7200 1550 7550 1550
Wire Wire Line
	7200 1650 7550 1650
Wire Wire Line
	7550 2200 7200 2200
Wire Wire Line
	7400 3650 7750 3650
Wire Wire Line
	7400 3850 7750 3850
Wire Wire Line
	8700 5600 9000 5600
Wire Wire Line
	8700 5500 9000 5500
Wire Wire Line
	8700 4400 9000 4400
Wire Wire Line
	8700 4300 9000 4300
Wire Wire Line
	7200 2700 7550 2700
Wire Wire Line
	7200 2850 7550 2850
Wire Wire Line
	7200 3000 7550 3000
Wire Wire Line
	6650 5600 6950 5600
Wire Wire Line
	6650 5700 6950 5700
Wire Wire Line
	6650 5800 6950 5800
Wire Wire Line
	7800 4600 9000 4600
Wire Wire Line
	7800 4700 9000 4700
Wire Wire Line
	7800 4800 9000 4800
Wire Wire Line
	7800 4900 9000 4900
Wire Wire Line
	5450 5050 6100 5050
Wire Wire Line
	5450 3750 6100 3750
Text Label 5450 3750 0    60   ~ 0
Contactor_12V
$Comp
L Connectors:649006227222 J?
U 1 1 5BA73856
P 1450 1500
F 0 "J?" H 1450 1937 60  0000 C CNN
F 1 "649006227222" H 1400 1850 60  0000 C CNN
F 2 "Connectors:649006227222" H 1450 600 60  0001 C CNN
F 3 "http://katalog.we-online.de/em/datasheet/649006227222.pdf" H 1450 500 60  0001 C CNN
F 4 "Digikey" H 1450 1100 60  0001 C CNN "Supplier"
F 5 "732-1939-ND" H 1450 1000 60  0001 C CNN "Supplier Part Number"
F 6 "Wurth Electronics Inc." H 1450 900 60  0001 C CNN "Manufacturer"
F 7 "649006227222" H 1450 800 60  0001 C CNN "Manufacturer Part Number"
F 8 "HEADER MALE DUAL ANGLE W/MNT 6P" H 1450 700 60  0001 C CNN "Description"
	1    1450 1500
	1    0    0    -1  
$EndComp
Wire Wire Line
	1250 1500 950  1500
Text Label 950  1500 2    60   ~ 0
CAN2_L
Wire Wire Line
	1250 1400 950  1400
Wire Wire Line
	1250 1300 950  1300
Wire Wire Line
	1650 1300 1800 1300
Wire Wire Line
	1650 1500 1950 1500
Text Label 950  1400 2    60   ~ 0
CAN2_H
$Comp
L Power_Port:DGND #PWR?
U 1 1 5BA85747
P 1950 1750
F 0 "#PWR?" H 1950 1580 50  0001 C CNN
F 1 "DGND" H 1950 1650 50  0000 C CNN
F 2 "" H 1950 1850 60  0000 C CNN
F 3 "" H 1930 1660 60  0000 C CNN
	1    1950 1750
	1    0    0    -1  
$EndComp
Wire Wire Line
	1950 1650 1950 1500
Text Label 2250 1400 2    60   ~ 0
Shield2
Wire Wire Line
	2250 1400 2250 1500
Wire Wire Line
	1650 1400 2250 1400
$Comp
L Resistors:RC0805JR-070RL R?
U 1 1 5BA8F541
P 2250 1700
F 0 "R?" V 2205 1758 60  0000 L CNN
F 1 "RC0805JR-070RL" H 2250 1400 50  0001 C CNN
F 2 "Resistors:R0805" H 2250 800 30  0001 C CNN
F 3 "http://www.yageo.com/documents/recent/PYu-RC_Group_51_RoHS_L_7.pdf" H 2250 750 30  0001 C CNN
F 4 "Digikey" H 2250 1300 60  0001 C CNN "Supplier"
F 5 "311-0.0ARCT-ND" H 2250 1200 60  0001 C CNN "Supplier Part Number"
F 6 "Yageo" H 2250 1100 60  0001 C CNN "Manufacturer"
F 7 "RC0805JR-070RL" H 2250 1000 60  0001 C CNN "Manufacturer Part Number"
F 8 "RES SMD 0.0 OHM JUMPER 1/8W 0805" H 2250 900 60  0001 C CNN "Description"
F 9 "0" V 2303 1758 50  0000 L CNN "Resistance (Ohms)"
F 10 "0" H 2660 1620 50  0001 C CNN "Tolerance (%)"
F 11 "1/8W" H 2250 1560 50  0001 C CNN "Puissance (Watts)"
	1    2250 1700
	0    1    1    0   
$EndComp
$Comp
L Power_Port:DGND #PWR?
U 1 1 5BA8F5F1
P 2250 2100
F 0 "#PWR?" H 2250 1930 50  0001 C CNN
F 1 "DGND" H 2250 2000 50  0000 C CNN
F 2 "" H 2250 2200 60  0000 C CNN
F 3 "" H 2230 2010 60  0000 C CNN
	1    2250 2100
	1    0    0    -1  
$EndComp
Wire Wire Line
	2250 1900 2250 2000
Text Label 950  1300 2    60   ~ 0
Shield2
$Comp
L Power_Port:CAN_PWR #PWR?
U 1 1 5BA9C650
P 1950 1100
AR Path="/58F590C0/5BA9C650" Ref="#PWR?"  Part="1" 
AR Path="/5BA9C650" Ref="#PWR?"  Part="1" 
F 0 "#PWR?" H 1950 950 50  0001 C CNN
F 1 "CAN_PWR" H 1940 1240 50  0000 C CNN
F 2 "" H 1950 1100 60  0000 C CNN
F 3 "" H 1950 1100 60  0000 C CNN
	1    1950 1100
	1    0    0    -1  
$EndComp
Wire Wire Line
	1950 1100 1950 1300
$Comp
L Power_Port:PWR_FLAG #FLG?
U 1 1 5BAAA8ED
P 1800 1250
AR Path="/58F590C0/5BAAA8ED" Ref="#FLG?"  Part="1" 
AR Path="/5BAAA8ED" Ref="#FLG?"  Part="1" 
F 0 "#FLG?" H 1800 1150 60  0001 C CNN
F 1 "PWR_FLAG" H 1800 1450 30  0000 C CNN
F 2 "" H 1800 1250 60  0000 C CNN
F 3 "" H 1800 1250 60  0000 C CNN
	1    1800 1250
	1    0    0    -1  
$EndComp
Wire Wire Line
	1800 1250 1800 1300
Connection ~ 1800 1300
Wire Wire Line
	1800 1300 1950 1300
Text Notes 1050 850  0    120  ~ 24
Can Car
NoConn ~ 8700 3400
Wire Wire Line
	8700 1400 9000 1400
Wire Wire Line
	9000 1500 8700 1500
NoConn ~ 8700 1400
NoConn ~ 8700 1500
$Comp
L Power_Port:CAN_PWR #PWR?
U 1 1 5BAA2D76
P 4950 4900
AR Path="/58F590C0/5BAA2D76" Ref="#PWR?"  Part="1" 
AR Path="/5BAA2D76" Ref="#PWR?"  Part="1" 
F 0 "#PWR?" H 4950 4750 50  0001 C CNN
F 1 "CAN_PWR" H 4940 5040 50  0000 C CNN
F 2 "" H 4950 4900 60  0000 C CNN
F 3 "" H 4950 4900 60  0000 C CNN
	1    4950 4900
	1    0    0    -1  
$EndComp
$Comp
L Fuses:39511000440 F102
U 1 1 5A89A190
P 5250 5050
F 0 "F102" H 5250 5160 60  0000 C CNN
F 1 "39511000440" H 5250 4750 50  0001 C CNN
F 2 "Fuses:TE5_395" H 5250 4150 30  0001 C CNN
F 3 "http://www.littelfuse.com/~/media/electronics/datasheets/fuses/littelfuse_fuse_395_datasheet.pdf.pdf" H 5250 4100 30  0001 C CNN
F 4 "Digikey" H 5250 3850 60  0001 C CNN "Supplier"
F 5 "WK0009-ND" H 5250 3750 60  0001 C CNN "Supplier Part Number"
F 6 "Littelfuse Inc." H 5250 3600 60  0001 C CNN "Manufacturer"
F 7 "56200001009" H 5250 3450 60  0001 C CNN "Manufacturer Part Number"
F 8 "FUSE HOLDER RADIAL 250V 6.3A PCB" H 5250 3300 60  0001 C CNN "Description"
F 9 "1A" H 5250 4950 50  0000 C CNN "Current Rating (A)"
F 10 "-" H 5150 4850 50  0001 C CNN "Voltage Rating - DC"
F 11 "125V" H 5350 4850 60  0001 C CNN "Voltage Rating - AC"
F 12 "Fuse Holder" H 5250 3950 60  0001 C CNN "Fuse Holder"
	1    5250 5050
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 4900 4950 5050
Wire Wire Line
	4950 5050 5050 5050
$EndSCHEMATC
